[
  {
    "name": "default-null",
    "function": "default",
    "args": [
      "fallback",
      null
    ],
    "template": "{{ default \"fallback\" .value }}",
    "data": {
      "value": null
    },
    "expected": "fallback"
  },
  {
    "name": "default-present",
    "function": "default",
    "args": [
      "fallback",
      "value"
    ],
    "template": "{{ default \"fallback\" .value }}",
    "data": {
      "value": "value"
    },
    "expected": "value"
  },
  {
    "name": "upper-basic",
    "function": "upper",
    "args": [
      "hello sprig"
    ],
    "template": "{{ upper .word }}",
    "data": {
      "word": "hello sprig"
    },
    "expected": "HELLO SPRIG"
  },
  {
    "name": "lower-basic",
    "function": "lower",
    "args": [
      "HELLO SPRIG"
    ],
    "template": "{{ lower .word }}",
    "data": {
      "word": "HELLO SPRIG"
    },
    "expected": "hello sprig"
  },
  {
    "name": "title-basic",
    "function": "title",
    "args": [
      "hello sprig helpers"
    ],
    "template": "{{ title .text }}",
    "data": {
      "text": "hello sprig helpers"
    },
    "expected": "Hello Sprig Helpers"
  },
  {
    "name": "trim-whitespace",
    "function": "trim",
    "args": [
      "  padded  \n"
    ],
    "template": "{{ trim .text }}",
    "data": {
      "text": "  padded  \n"
    },
    "expected": "padded"
  },
  {
    "name": "trimall-cutset",
    "function": "trimAll",
    "args": [
      "-:",
      "-:value:-"
    ],
    "template": "{{ trimAll \"-:\" \"-:value:-\" }}",
    "expected": "value"
  },
  {
    "name": "contains-hit",
    "function": "contains",
    "args": [
      "foo",
      "foobar"
    ],
    "template": "{{ contains \"foo\" \"foobar\" }}",
    "expected": "true"
  },
  {
    "name": "contains-miss",
    "function": "contains",
    "args": [
      "baz",
      "foobar"
    ],
    "template": "{{ contains \"baz\" \"foobar\" }}",
    "expected": "false"
  },
  {
    "name": "repeat-basic",
    "function": "repeat",
    "args": [
      3,
      "xy"
    ],
    "template": "{{ repeat 3 \"xy\" }}",
    "expected": "xyxyxy"
  },
  {
    "name": "coalesce-first-value",
    "function": "coalesce",
    "args": [
      null,
      "value",
      "fallback"
    ],
    "template": "{{ coalesce .a .b \"fallback\" }}",
    "data": {
      "a": null,
      "b": "value"
    },
    "expected": "value"
  },
  {
    "name": "ternary-selects-branch",
    "function": "ternary",
    "args": [
      "yes",
      "no",
      true
    ],
    "template": "{{ ternary \"yes\" \"no\" true }}",
    "expected": "yes"
  },
  {
    "name": "empty-null",
    "function": "empty",
    "args": [
      null
    ],
    "template": "{{ empty .value }}",
    "data": {
      "value": null
    },
    "expected": "true"
  },
  {
    "name": "fail-conditional",
    "template": "{{ if false }}{{ fail \"boom\" }}{{ end }}",
    "expected": ""
  },
  {
    "name": "trimprefix-basic",
    "function": "trimPrefix",
    "args": [
      "go",
      "gopher"
    ],
    "template": "{{ trimPrefix \"go\" \"gopher\" }}",
    "expected": "pher"
  },
  {
    "name": "hasprefix-basic",
    "function": "hasPrefix",
    "args": [
      "go",
      "gopher"
    ],
    "template": "{{ hasPrefix \"go\" \"gopher\" }}",
    "expected": "true"
  },
  {
    "name": "hassuffix-basic",
    "function": "hasSuffix",
    "args": [
      ".rs",
      "main.rs"
    ],
    "template": "{{ hasSuffix \".rs\" \"main.rs\" }}",
    "expected": "true"
  },
  {
    "name": "trimsuffix-basic",
    "function": "trimSuffix",
    "args": [
      ".rs",
      "main.rs"
    ],
    "template": "{{ trimSuffix \".rs\" \"main.rs\" }}",
    "expected": "main"
  },
  {
    "name": "replace-basic",
    "function": "replace",
    "args": [
      "l",
      "x",
      "hello"
    ],
    "template": "{{ replace \"l\" \"x\" \"hello\" }}",
    "expected": "hexxo"
  },
  {
    "name": "splitlist-basic",
    "function": "splitList",
    "args": [
      ",",
      "a,b,c"
    ],
    "template": "{{ join \":\" (splitList \",\" \"a,b,c\") }}",
    "expected": "a:b:c"
  },
  {
    "name": "split-map",
    "function": "split",
    "args": [
      ",",
      "a,b,c"
    ],
    "template": "{{ toJson (split \",\" \"a,b,c\") }}",
    "expected": "{\"_0\":\"a\",\"_1\":\"b\",\"_2\":\"c\"}"
  },
  {
    "name": "splitn-limit",
    "function": "splitn",
    "args": [
      ",",
      "a,b,c",
      2
    ],
    "template": "{{ toJson (splitn \",\" \"a,b,c\" 2) }}",
    "expected": "[\"a\",\"b,c\"]"
  },
  {
    "name": "join-basic",
    "function": "join",
    "args": [
      "-",
      [
        "a",
        "b",
        "c"
      ]
    ],
    "template": "{{ join \"-\" (list \"a\" \"b\" \"c\") }}",
    "expected": "a-b-c"
  },
  {
    "name": "list-basic",
    "function": "list",
    "args": [
      "a",
      "b",
      "c"
    ],
    "template": "{{ join \"\" (list \"a\" \"b\" \"c\") }}",
    "expected": "abc"
  },
  {
    "name": "first-basic",
    "function": "first",
    "args": [
      [
        1,
        2,
        3
      ]
    ],
    "template": "{{ first (list 1 2 3) }}",
    "expected": "1"
  },
  {
    "name": "last-basic",
    "function": "last",
    "args": [
      [
        1,
        2,
        3
      ]
    ],
    "template": "{{ last (list 1 2 3) }}",
    "expected": "3"
  },
  {
    "name": "rest-basic",
    "function": "rest",
    "args": [
      [
        1,
        2,
        3
      ]
    ],
    "template": "{{ toJson (rest (list 1 2 3)) }}",
    "expected": "[2,3]"
  },
  {
    "name": "initial-basic",
    "function": "initial",
    "args": [
      [
        1,
        2,
        3
      ]
    ],
    "template": "{{ toJson (initial (list 1 2 3)) }}",
    "expected": "[1,2]"
  },
  {
    "name": "append-basic",
    "function": "append",
    "args": [
      [
        "a",
        "b"
      ],
      "c"
    ],
    "template": "{{ join \",\" (append (list \"a\" \"b\") \"c\") }}",
    "expected": "a,b,c"
  },
  {
    "name": "prepend-basic",
    "function": "prepend",
    "args": [
      [
        2,
        3
      ],
      1
    ],
    "template": "{{ toJson (prepend (list 2 3) 1) }}",
    "expected": "[1,2,3]"
  },
  {
    "name": "concat-basic",
    "function": "concat",
    "args": [
      [
        1,
        2
      ],
      [
        3,
        4
      ]
    ],
    "template": "{{ toJson (concat (list 1 2) (list 3 4)) }}",
    "expected": "[1,2,3,4]"
  },
  {
    "name": "reverse-basic",
    "function": "reverse",
    "args": [
      [
        1,
        2,
        3
      ]
    ],
    "template": "{{ toJson (reverse (list 1 2 3)) }}",
    "expected": "[3,2,1]"
  },
  {
    "name": "uniq-basic",
    "function": "uniq",
    "args": [
      [
        "a",
        "b",
        "a",
        "c"
      ]
    ],
    "template": "{{ join \",\" (uniq (list \"a\" \"b\" \"a\" \"c\")) }}",
    "expected": "a,b,c"
  },
  {
    "name": "sortalpha-basic",
    "function": "sortAlpha",
    "args": [
      [
        "c",
        "b",
        "a"
      ]
    ],
    "template": "{{ join \"\" (sortAlpha (list \"c\" \"b\" \"a\")) }}",
    "expected": "abc"
  },
  {
    "name": "fromjson-roundtrip",
    "function": "fromJson",
    "args": [
      "{\"foo\":\"bar\"}"
    ],
    "template": "{{ fromJson .json | toJson }}",
    "data": {
      "json": "{\"foo\":\"bar\"}"
    },
    "expected": "{\"foo\":\"bar\"}"
  },
  {
    "name": "mustfromjson-roundtrip",
    "function": "mustFromJson",
    "args": [
      "{\"foo\":\"bar\"}"
    ],
    "template": "{{ mustFromJson .json | toJson }}",
    "data": {
      "json": "{\"foo\":\"bar\"}"
    },
    "expected": "{\"foo\":\"bar\"}"
  },
  {
    "name": "tojson-object",
    "function": "toJson",
    "args": [
      {
        "foo": "bar"
      }
    ],
    "template": "{{ toJson .value }}",
    "data": {
      "value": {
        "foo": "bar"
      }
    },
    "expected": "{\"foo\":\"bar\"}"
  },
  {
    "name": "toprettyjson-object",
    "function": "toPrettyJson",
    "args": [
      {
        "foo": "bar"
      }
    ],
    "template": "{{ toPrettyJson .value }}",
    "data": {
      "value": {
        "foo": "bar"
      }
    },
    "expected": "{\n  \"foo\": \"bar\"\n}"
  },
  {
    "name": "musttoprettyjson-object",
    "function": "mustToPrettyJson",
    "args": [
      {
        "foo": "bar"
      }
    ],
    "template": "{{ mustToPrettyJson .value }}",
    "data": {
      "value": {
        "foo": "bar"
      }
    },
    "expected": "{\n  \"foo\": \"bar\"\n}"
  },
  {
    "name": "torawjson-object",
    "function": "toRawJson",
    "args": [
      {
        "foo": "bar",
        "nested": {
          "baz": 1
        }
      }
    ],
    "template": "{{ toRawJson .value }}",
    "data": {
      "value": {
        "foo": "bar",
        "nested": {
          "baz": 1
        }
      }
    },
    "expected": "{\"foo\":\"bar\",\"nested\":{\"baz\":1}}"
  },
  {
    "name": "musttorawjson-object",
    "function": "mustToRawJson",
    "args": [
      {
        "foo": "bar",
        "nested": {
          "baz": 1
        }
      }
    ],
    "template": "{{ mustToRawJson .value }}",
    "data": {
      "value": {
        "foo": "bar",
        "nested": {
          "baz": 1
        }
      }
    },
    "expected": "{\"foo\":\"bar\",\"nested\":{\"baz\":1}}"
  },
  {
    "name": "substr-basic",
    "function": "substr",
    "args": [
      1,
      3,
      "sprig"
    ],
    "template": "{{ substr 1 3 \"sprig\" }}",
    "expected": "pr"
  },
  {
    "name": "trunc-basic",
    "function": "trunc",
    "args": [
      5,
      "sprig helpers"
    ],
    "template": "{{ trunc 5 \"sprig helpers\" }}",
    "expected": "sprig"
  },
  {
    "name": "wrap-basic",
    "function": "wrap",
    "args": [
      5,
      "lithos sprig helpers"
    ],
    "template": "{{ wrap 5 \"lithos sprig helpers\" }}",
    "expected": "lithos\nsprig\nhelpers"
  },
  {
    "name": "indent-basic",
    "function": "indent",
    "args": [
      2,
      "line1\nline2"
    ],
    "template": "{{ indent 2 \"line1\\nline2\" }}",
    "expected": "  line1\n  line2"
  },
  {
    "name": "nindent-basic",
    "function": "nindent",
    "args": [
      2,
      "line1\nline2"
    ],
    "template": "{{ nindent 2 \"line1\\nline2\" }}",
    "expected": "\n  line1\n  line2"
  },
  {
    "name": "nospace-basic",
    "function": "nospace",
    "args": [
      " spaced \n text "
    ],
    "template": "{{ nospace (printf \" spaced %s text \" \"\\n\") }}",
    "expected": "spacedtext"
  },
  {
    "name": "compact-basic",
    "function": "compact",
    "args": [
      [
        "a",
        "",
        null,
        "b"
      ]
    ],
    "template": "{{ join \",\" (compact (list \"a\" \"\" nil \"b\")) }}",
    "expected": "a,b"
  },
  {
    "name": "without-basic",
    "function": "without",
    "args": [
      [
        "a",
        "b",
        "c",
        "b"
      ],
      "b"
    ],
    "template": "{{ join \",\" (without (list \"a\" \"b\" \"c\" \"b\") \"b\") }}",
    "expected": "a,c"
  },
  {
    "name": "has-basic",
    "function": "has",
    "args": [
      "b",
      [
        "a",
        "b",
        "c"
      ]
    ],
    "template": "{{ has \"b\" (list \"a\" \"b\" \"c\") }}",
    "expected": "true"
  },
  {
    "name": "max-variadic",
    "function": "max",
    "args": [
      1,
      5,
      3
    ],
    "output": 5
  },
  {
    "name": "min-array",
    "function": "min",
    "args": [
      [
        4,
        2,
        9
      ]
    ],
    "output": 0
  },
  {
    "name": "musttojson-object",
    "function": "mustToJson",
    "args": [
      {
        "numbers": [
          1,
          2,
          3
        ]
      }
    ],
    "template": "{{ mustToJson .value }}",
    "data": {
      "value": {
        "numbers": [
          1,
          2,
          3
        ]
      }
    },
    "expected": "{\"numbers\":[1,2,3]}"
  },
  {
    "name": "dict-basic",
    "function": "dict",
    "args": [
      "foo",
      "bar",
      "baz",
      1
    ],
    "template": "{{ toJson (dict \"foo\" \"bar\" \"baz\" 1) }}",
    "expected": "{\"baz\":1,\"foo\":\"bar\"}"
  },
  {
    "name": "set-basic",
    "function": "set",
    "args": [
      {
        "foo": "bar"
      },
      "baz",
      1
    ],
    "template": "{{ toJson (set (dict \"foo\" \"bar\") \"baz\" 1) }}",
    "expected": "{\"baz\":1,\"foo\":\"bar\"}"
  },
  {
    "name": "unset-basic",
    "function": "unset",
    "args": [
      {
        "foo": "bar",
        "baz": 1
      },
      "foo"
    ],
    "template": "{{ toJson (unset (dict \"foo\" \"bar\" \"baz\" 1) \"foo\") }}",
    "expected": "{\"baz\":1}"
  },
  {
    "name": "haskey-true",
    "function": "hasKey",
    "args": [
      {
        "foo": 1
      },
      "foo"
    ],
    "template": "{{ hasKey (dict \"foo\" 1) \"foo\" }}",
    "expected": "true"
  },
  {
    "name": "get-key-present",
    "function": "get",
    "args": [
      {
        "foo": "bar"
      },
      "foo"
    ],
    "output": "bar"
  },
  {
    "name": "get-key-missing",
    "function": "get",
    "args": [
      {
        "foo": "bar"
      },
      "missing"
    ],
    "output": ""
  },
  {
    "name": "keys-basic",
    "function": "keys",
    "args": [
      {
        "b": 2,
        "a": 1
      }
    ],
    "template": "{{ join \",\" (keys (dict \"b\" 2 \"a\" 1)) }}"
  },
  {
    "name": "values-basic",
    "function": "values",
    "args": [
      {
        "b": 2,
        "a": 1
      }
    ],
    "template": "{{ join \",\" (values (dict \"b\" 2 \"a\" 1)) }}"
  },
  {
    "name": "merge-basic",
    "function": "merge",
    "args": [
      {
        "foo": 1
      },
      {
        "bar": 2
      }
    ],
    "template": "{{ toJson (merge (dict \"foo\" 1) (dict \"bar\" 2)) }}",
    "expected": "{\"bar\":2,\"foo\":1}"
  },
  {
    "name": "cat-basic",
    "function": "cat",
    "args": [
      "foo",
      "bar"
    ],
    "output": "foo bar"
  },
  {
    "name": "quote-double",
    "function": "quote",
    "args": [
      "foo",
      "bar baz"
    ],
    "output": "\"foo\" \"bar baz\""
  },
  {
    "name": "squote-basic",
    "function": "squote",
    "args": [
      "foo",
      "bar"
    ],
    "output": "'foo' 'bar'"
  },
  {
    "name": "snakecase-basic",
    "function": "snakecase",
    "args": [
      "FirstName"
    ],
    "output": "first_name"
  },
  {
    "name": "camelcase-basic",
    "function": "camelcase",
    "args": [
      "first_name"
    ],
    "output": "FirstName"
  },
  {
    "name": "kebabcase-basic",
    "function": "kebabcase",
    "args": [
      "First Name"
    ],
    "output": "first-name"
  },
  {
    "name": "swapcase-basic",
    "function": "swapcase",
    "args": [
      "FirstName"
    ],
    "output": "fIRSTnAME"
  },
  {
    "name": "pick-basic",
    "function": "pick",
    "args": [
      {
        "foo": 1,
        "bar": 2,
        "baz": 3
      },
      "foo",
      "baz"
    ],
    "output": {
      "foo": 1,
      "baz": 3
    }
  },
  {
    "name": "omit-basic",
    "function": "omit",
    "args": [
      {
        "foo": 1,
        "bar": 2
      },
      "bar"
    ],
    "output": {
      "foo": 1
    }
  },
  {
    "name": "pluck-basic",
    "function": "pluck",
    "args": [
      "name",
      {
        "name": "alpha"
      },
      {
        "name": "beta"
      },
      {
        "other": "ignored"
      }
    ],
    "output": [
      "alpha",
      "beta"
    ]
  },
  {
    "name": "dig-existing",
    "function": "dig",
    "args": [
      "user",
      "profile",
      "id",
      null,
      {
        "user": {
          "profile": {
            "id": 42
          }
        }
      }
    ],
    "output": 42
  },
  {
    "name": "dig-missing",
    "function": "dig",
    "args": [
      "user",
      "profile",
      "missing",
      "fallback",
      {
        "user": {
          "profile": {
            "id": 42
          }
        }
      }
    ],
    "output": "fallback"
  }
]
