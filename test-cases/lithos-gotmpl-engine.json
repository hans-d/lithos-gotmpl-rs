[
  {
    "name": "assign-updates-binding",
    "template": "{{ $v := \"first\" }}{{ $v = \"second\" }}{{ $v }}",
    "data": {},
    "expected": "second"
  },
  {
    "name": "nested-range-if",
    "template": "{{ range $i, $v := .items }}{{ if $v.show }}{{$i}}:{{$v.value}};{{ end }}{{ end }}",
    "data": {
      "items": [
        { "show": true, "value": "A" },
        { "show": false, "value": "B" },
        { "show": true, "value": "C" }
      ]
    },
    "expected": "0:A;2:C;"
  },
  {
    "name": "comment-with-unmatched-quote",
    "template": "{{/* comment with \\\" unmatched */}}",
    "data": {},
    "expected": ""
  },
  {
    "name": "comment-with-unmatched-backtick",
    "template": "{{/* comment with ` unmatched */}}",
    "data": {},
    "expected": ""
  },
  {
    "name": "if-else-if-chain",
    "template": "{{ if .primary }}A{{ else if .secondary }}B{{ else }}C{{ end }}",
    "data": {
      "primary": false,
      "secondary": true
    },
    "expected": "B"
  },
  {
    "name": "else-with-is-invalid",
    "template": "{{ if true }}A{{ else with . }}B{{ end }}",
    "data": {},
    "error": "invalid else-if: expected 'if' after 'else'"
  }
]
